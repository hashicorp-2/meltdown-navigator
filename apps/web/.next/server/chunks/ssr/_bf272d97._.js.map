{"version":3,"sources":["turbopack:///[project]/apps/web/node_modules/next/src/client/components/router-reducer/router-reducer-types.ts","turbopack:///[project]/node_modules/@swc/helpers/cjs/_interop_require_wildcard.cjs","turbopack:///[project]/apps/web/node_modules/next/src/shared/lib/is-thenable.ts","turbopack:///[project]/apps/web/node_modules/next/src/client/components/use-action-queue.ts","turbopack:///[project]/apps/web/node_modules/next/src/client/app-call-server.ts","turbopack:///[project]/apps/web/node_modules/next/src/client/app-find-source-map-url.ts","turbopack:///[project]/apps/web/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","turbopack:///[project]/apps/web/components/CrisisTranslatorForm.tsx","turbopack:///[project]/apps/web/app/actions/data:85a8d4 <text/javascript>","turbopack:///[project]/apps/web/components/ui/Button.tsx","turbopack:///[project]/apps/web/components/StressGauge.tsx","turbopack:///[project]/apps/web/components/VisualPlanSteps.tsx","turbopack:///[project]/apps/web/components/ContextualEnvironment.tsx","turbopack:///[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","turbopack:///[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","turbopack:///[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","turbopack:///[project]/node_modules/framer-motion/dist/es/utils/use-composed-ref.mjs","turbopack:///[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/utils.mjs","turbopack:///[project]/apps/web/components/CalmingInterventions.tsx","turbopack:///[project]/apps/web/components/PredictiveAlert.tsx","turbopack:///[project]/apps/web/app/actions/data:e45c8c <text/javascript>","turbopack:///[project]/apps/web/components/CaregiverAlertButton.tsx","turbopack:///[project]/apps/web/lib/api.ts"],"sourcesContent":["import type { CacheNode } from '../../../shared/lib/app-router-types'\nimport type {\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type { FetchServerResponseResult } from './fetch-server-response'\n\nexport const ACTION_REFRESH = 'refresh'\nexport const ACTION_NAVIGATE = 'navigate'\nexport const ACTION_RESTORE = 'restore'\nexport const ACTION_SERVER_PATCH = 'server-patch'\nexport const ACTION_HMR_REFRESH = 'hmr-refresh'\nexport const ACTION_SERVER_ACTION = 'server-action'\n\nexport type RouterChangeByServerResponse = ({\n  navigatedAt,\n  previousTree,\n  serverResponse,\n}: {\n  navigatedAt: number\n  previousTree: FlightRouterState\n  serverResponse: FetchServerResponseResult\n}) => void\n\nexport interface Mutable {\n  mpaNavigation?: boolean\n  patchedTree?: FlightRouterState\n  renderedSearch?: string\n  canonicalUrl?: string\n  scrollableSegments?: FlightSegmentPath[]\n  pendingPush?: boolean\n  cache?: CacheNode\n  hashFragment?: string\n  shouldScroll?: boolean\n  preserveCustomHistoryState?: boolean\n  onlyHashChange?: boolean\n  collectedDebugInfo?: Array<unknown>\n}\n\nexport interface ServerActionMutable extends Mutable {\n  inFlightServerAction?: Promise<any> | null\n}\n\n/**\n * Refresh triggers a refresh of the full page data.\n * - fetches the Flight data and fills rsc at the root of the cache.\n * - The router state is updated at the root.\n */\nexport interface RefreshAction {\n  type: typeof ACTION_REFRESH\n  origin: Location['origin']\n}\n\nexport interface HmrRefreshAction {\n  type: typeof ACTION_HMR_REFRESH\n  origin: Location['origin']\n}\n\nexport type ServerActionDispatcher = (\n  args: Omit<\n    ServerActionAction,\n    'type' | 'mutable' | 'navigate' | 'changeByServerResponse' | 'cache'\n  >\n) => void\n\nexport interface ServerActionAction {\n  type: typeof ACTION_SERVER_ACTION\n  actionId: string\n  actionArgs: any[]\n  resolve: (value: any) => void\n  reject: (reason?: any) => void\n  didRevalidate?: boolean\n}\n\n/**\n * Navigate triggers a navigation to the provided url. It supports two types: `push` and `replace`.\n *\n * `navigateType`:\n * - `push` - pushes a new history entry in the browser history\n * - `replace` - replaces the current history entry in the browser history\n *\n * Navigate has multiple cache heuristics:\n * - page was prefetched\n *  - Apply router state tree from prefetch\n *  - Apply Flight data from prefetch to the cache\n *  - If Flight data is a string, it's a redirect and the state is updated to trigger a redirect\n *  - Check if hard navigation is needed\n *    - Hard navigation happens when a dynamic parameter below the common layout changed\n *    - When hard navigation is needed the cache is invalidated below the flightSegmentPath\n *    - The missing cache nodes of the page will be fetched in layout-router and trigger the SERVER_PATCH action\n *  - If hard navigation is not needed\n *    - The cache is reused\n *    - If any cache nodes are missing they'll be fetched in layout-router and trigger the SERVER_PATCH action\n * - page was not prefetched\n *  - The navigate was called from `next/router` (`router.push()` / `router.replace()`) / `next/link` without prefetched data available (e.g. the prefetch didn't come back from the server before clicking the link)\n *    - Flight data is fetched in the reducer (suspends the reducer)\n *    - Router state tree is created based on Flight data\n *    - Cache is filled based on the Flight data\n *\n * Above steps explain 3 cases:\n * - `soft` - Reuses the existing cache and fetches missing nodes in layout-router.\n * - `hard` - Creates a new cache where cache nodes are removed below the common layout and fetches missing nodes in layout-router.\n * - `optimistic` (explicit no prefetch) - Creates a new cache and kicks off the data fetch in the reducer. The data fetch is awaited in the layout-router.\n */\nexport interface NavigateAction {\n  type: typeof ACTION_NAVIGATE\n  url: URL\n  isExternalUrl: boolean\n  locationSearch: Location['search']\n  navigateType: 'push' | 'replace'\n  shouldScroll: boolean\n}\n\n/**\n * Restore applies the provided router state.\n * - Used for `popstate` (back/forward navigation) where a known router state has to be applied.\n * - Also used when syncing the router state with `pushState`/`replaceState` calls.\n * - Router state is applied as-is from the history state, if available.\n * - If the history state does not contain the router state, the existing router state is used.\n * - If any cache node is missing it will be fetched in layout-router during rendering and the server-patch case.\n * - If existing cache nodes match these are used.\n */\nexport interface RestoreAction {\n  type: typeof ACTION_RESTORE\n  url: URL\n  historyState: AppHistoryState | undefined\n}\n\nexport type AppHistoryState = {\n  tree: FlightRouterState\n  renderedSearch: string\n}\n\n/**\n * Server-patch applies the provided Flight data to the cache and router tree.\n * - Only triggered in layout-router.\n * - Creates a new cache and router state with the Flight data applied.\n */\nexport interface ServerPatchAction {\n  type: typeof ACTION_SERVER_PATCH\n  navigatedAt: number\n  serverResponse: FetchServerResponseResult\n  previousTree: FlightRouterState\n}\n\n/**\n * PrefetchKind defines the type of prefetching that should be done.\n * - `auto` - if the page is dynamic, prefetch the page data partially, if static prefetch the page data fully.\n * - `full` - prefetch the page data fully.\n * - `temporary` - a temporary prefetch entry is added to the cache, this is used when prefetch={false} is used in next/link or when you push a route programmatically.\n */\n\nexport enum PrefetchKind {\n  AUTO = 'auto',\n  FULL = 'full',\n  TEMPORARY = 'temporary',\n}\n\n/**\n * Prefetch adds the provided FlightData to the prefetch cache\n * - Creates the router state tree based on the patch in FlightData\n * - Adds the FlightData to the prefetch cache\n * - In ACTION_NAVIGATE the prefetch cache is checked and the router state tree and FlightData are applied.\n */\n\nexport interface PushRef {\n  /**\n   * If the app-router should push a new history entry in app-router's useEffect()\n   */\n  pendingPush: boolean\n  /**\n   * Multi-page navigation through location.href.\n   */\n  mpaNavigation: boolean\n  /**\n   * Skip applying the router state to the browser history state.\n   */\n  preserveCustomHistoryState: boolean\n}\n\nexport type FocusAndScrollRef = {\n  /**\n   * If focus and scroll should be set in the layout-router's useEffect()\n   */\n  apply: boolean\n  /**\n   * The hash fragment that should be scrolled to.\n   */\n  hashFragment: string | null\n  /**\n   * The paths of the segments that should be focused.\n   */\n  segmentPaths: FlightSegmentPath[]\n  /**\n   * If only the URLs hash fragment changed\n   */\n  onlyHashChange: boolean\n}\n\n/**\n * Handles keeping the state of app-router.\n */\nexport type AppRouterState = {\n  /**\n   * The router state, this is written into the history state in app-router using replaceState/pushState.\n   * - Has to be serializable as it is written into the history state.\n   * - Holds which segments and parallel routes are shown on the screen.\n   */\n  tree: FlightRouterState\n  /**\n   * The cache holds React nodes for every segment that is shown on screen as well as previously shown segments.\n   * It also holds in-progress data requests.\n   */\n  cache: CacheNode\n  /**\n   * Decides if the update should create a new history entry and if the navigation has to trigger a browser navigation.\n   */\n  pushRef: PushRef\n  /**\n   * Decides if the update should apply scroll and focus management.\n   */\n  focusAndScrollRef: FocusAndScrollRef\n  /**\n   * The canonical url that is pushed/replaced.\n   * - This is the url you see in the browser.\n   */\n  canonicalUrl: string\n  renderedSearch: string\n  /**\n   * The underlying \"url\" representing the UI state, which is used for intercepting routes.\n   */\n  nextUrl: string | null\n\n  /**\n   * The previous next-url that was used previous to a dynamic navigation.\n   */\n  previousNextUrl: string | null\n\n  debugInfo: Array<unknown> | null\n}\n\nexport type ReadonlyReducerState = Readonly<AppRouterState>\nexport type ReducerState =\n  | (Promise<AppRouterState> & { _debugInfo?: Array<unknown> })\n  | AppRouterState\nexport type ReducerActions = Readonly<\n  | RefreshAction\n  | NavigateAction\n  | RestoreAction\n  | ServerPatchAction\n  | HmrRefreshAction\n  | ServerActionAction\n>\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","/**\n * Check to see if a value is Thenable.\n *\n * @param promise the maybe-thenable value\n * @returns true if the value is thenable\n */\nexport function isThenable<T = unknown>(\n  promise: Promise<T> | T\n): promise is Promise<T> {\n  return (\n    promise !== null &&\n    typeof promise === 'object' &&\n    'then' in promise &&\n    typeof promise.then === 'function'\n  )\n}\n","import type { Dispatch } from 'react'\nimport React, { use, useMemo } from 'react'\nimport { isThenable } from '../../shared/lib/is-thenable'\nimport type { AppRouterActionQueue } from './app-router-instance'\nimport type {\n  AppRouterState,\n  ReducerActions,\n  ReducerState,\n} from './router-reducer/router-reducer-types'\n\n// The app router state lives outside of React, so we can import the dispatch\n// method directly wherever we need it, rather than passing it around via props\n// or context.\nlet dispatch: Dispatch<ReducerActions> | null = null\n\nexport function dispatchAppRouterAction(action: ReducerActions) {\n  if (dispatch === null) {\n    throw new Error(\n      'Internal Next.js error: Router action dispatched before initialization.'\n    )\n  }\n  dispatch(action)\n}\n\nconst __DEV__ = process.env.NODE_ENV !== 'production'\nconst promisesWithDebugInfo: WeakMap<\n  Promise<AppRouterState>,\n  Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n> = __DEV__ ? new WeakMap() : (null as any)\n\nexport function useActionQueue(\n  actionQueue: AppRouterActionQueue\n): AppRouterState {\n  const [state, setState] = React.useState<ReducerState>(actionQueue.state)\n\n  // Because of a known issue that requires to decode Flight streams inside the\n  // render phase, we have to be a bit clever and assign the dispatch method to\n  // a module-level variable upon initialization. The useState hook in this\n  // module only exists to synchronize state that lives outside of React.\n  // Ideally, what we'd do instead is pass the state as a prop to root.render;\n  // this is conceptually how we're modeling the app router state, despite the\n  // weird implementation details.\n  if (process.env.NODE_ENV !== 'production') {\n    const { useAppDevRenderingIndicator } =\n      require('../../next-devtools/userspace/use-app-dev-rendering-indicator') as typeof import('../../next-devtools/userspace/use-app-dev-rendering-indicator')\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const appDevRenderingIndicator = useAppDevRenderingIndicator()\n\n    dispatch = (action: ReducerActions) => {\n      appDevRenderingIndicator(() => {\n        actionQueue.dispatch(action, setState)\n      })\n    }\n  } else {\n    dispatch = (action: ReducerActions) =>\n      actionQueue.dispatch(action, setState)\n  }\n\n  // When navigating to a non-prefetched route, then App Router state will be\n  // blocked until the server responds. We need to transfer the `_debugInfo`\n  // from the underlying Flight response onto the top-level promise that is\n  // passed to React (via `use`) so that the latency is accurately represented\n  // in the React DevTools.\n  const stateWithDebugInfo = useMemo(() => {\n    if (!__DEV__) {\n      return state\n    }\n\n    if (isThenable(state)) {\n      // useMemo can't be used to cache a Promise since the memoized value is thrown\n      // away when we suspend. So we use a WeakMap to cache the Promise with debug info.\n      let promiseWithDebugInfo = promisesWithDebugInfo.get(state)\n      if (promiseWithDebugInfo === undefined) {\n        const debugInfo: Array<unknown> = []\n        promiseWithDebugInfo = Promise.resolve(state).then((asyncState) => {\n          if (asyncState.debugInfo !== null) {\n            debugInfo.push(...asyncState.debugInfo)\n          }\n          return asyncState\n        }) as Promise<AppRouterState> & { _debugInfo?: Array<unknown> }\n        promiseWithDebugInfo._debugInfo = debugInfo\n\n        promisesWithDebugInfo.set(state, promiseWithDebugInfo)\n      }\n\n      return promiseWithDebugInfo\n    }\n    return state\n  }, [state])\n\n  return isThenable(stateWithDebugInfo)\n    ? use(stateWithDebugInfo)\n    : stateWithDebugInfo\n}\n","import { startTransition } from 'react'\nimport { ACTION_SERVER_ACTION } from './components/router-reducer/router-reducer-types'\nimport { dispatchAppRouterAction } from './components/use-action-queue'\n\nexport async function callServer(actionId: string, actionArgs: any[]) {\n  return new Promise((resolve, reject) => {\n    startTransition(() => {\n      dispatchAppRouterAction({\n        type: ACTION_SERVER_ACTION,\n        actionId,\n        actionArgs,\n        resolve,\n        reject,\n      })\n    })\n  })\n}\n","const basePath = process.env.__NEXT_ROUTER_BASEPATH || ''\nconst pathname = `${basePath}/__nextjs_source-map`\n\nexport const findSourceMapURL =\n  process.env.NODE_ENV === 'development'\n    ? function findSourceMapURL(filename: string): string | null {\n        if (filename === '') {\n          return null\n        }\n\n        if (\n          filename.startsWith(document.location.origin) &&\n          filename.includes('/_next/static')\n        ) {\n          // This is a request for a client chunk. This can only happen when\n          // using Turbopack. In this case, since we control how those source\n          // maps are generated, we can safely assume that the sourceMappingURL\n          // is relative to the filename, with an added `.map` extension. The\n          // browser can just request this file, and it gets served through the\n          // normal dev server, without the need to route this through\n          // the `/__nextjs_source-map` dev middleware.\n          return `${filename}.map`\n        }\n\n        const url = new URL(pathname, document.location.origin)\n        url.searchParams.set('filename', filename)\n\n        return url.href\n      }\n    : undefined\n","// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","'use client';\n\nimport React, { useMemo, useState, useTransition } from 'react';\nimport { translateCrisis } from '@/app/actions/translateCrisis';\nimport type { TranslateCrisisResult } from '@/app/actions/translateCrisis';\nimport { SectionCard } from '@/components/ui/SectionCard';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { VisualStressLanguage, type StressLevel } from '@/components/VisualStressLanguage';\nimport { StressGauge } from '@/components/StressGauge';\nimport { VisualPlanSteps } from '@/components/VisualPlanSteps';\nimport { ContextualEnvironment, type Environment } from '@/components/ContextualEnvironment';\nimport { CalmingInterventions } from '@/components/CalmingInterventions';\nimport { PredictiveAlert } from '@/components/PredictiveAlert';\nimport { CaregiverAlertButton } from '@/components/CaregiverAlertButton';\nimport { getProfileByUserId } from '@/lib/api';\nimport type { ProfileResponseDTO } from '@common/types';\n\ninterface FormState {\n  stressLevel: StressLevel;\n  environment: Environment;\n  rawMessage: string;\n  triggers: string;\n  safeSpace: string;\n  calmingItem: string;\n  communicationStyle: string;\n  supportContext: string;\n}\n\nconst INITIAL_FORM_STATE: FormState = {\n  stressLevel: 3,\n  environment: 'unknown',\n  rawMessage: '',\n  triggers: '',\n  safeSpace: '',\n  calmingItem: '',\n  communicationStyle: '',\n  supportContext: ''\n};\n\ninterface ResultState {\n  data?: TranslateCrisisResult;\n  error?: string;\n}\n\nfunction buildProfile(form: FormState) {\n  const triggers = form.triggers\n    .split(',')\n    .map((trigger) => trigger.trim())\n    .filter(Boolean);\n\n  return {\n    triggers,\n    safe_space: form.safeSpace,\n    calming_item: form.calmingItem,\n    communication_style: form.communicationStyle,\n    support_network_context: form.supportContext\n  } satisfies Record<string, unknown>;\n}\n\nexport function CrisisTranslatorForm() {\n  const [form, setForm] = useState<FormState>(INITIAL_FORM_STATE);\n  const [result, setResult] = useState<ResultState>({});\n  const [isPending, startTransition] = useTransition();\n  const [profile, setProfile] = useState<ProfileResponseDTO | null>(null);\n\n  // Load profile on mount\n  React.useEffect(() => {\n    const loadProfile = async () => {\n      try {\n        const userId = localStorage.getItem('meltdown_userId');\n        if (userId) {\n          const userProfile = await getProfileByUserId(userId);\n          setProfile(userProfile);\n        }\n      } catch (error) {\n        console.warn('Could not load profile:', error);\n      }\n    };\n    loadProfile();\n  }, []);\n\n  const isSubmitDisabled = useMemo(\n    () =>\n      isPending ||\n      form.rawMessage.trim().length === 0 ||\n      form.stressLevel < 1 ||\n      form.stressLevel > 5,\n    [form, isPending]\n  );\n\n  const handleChange = <T extends keyof FormState>(key: T, value: FormState[T]) => {\n    setForm((prev) => ({ ...prev, [key]: value }));\n  };\n\n  const handleSubmit = () => {\n    startTransition(async () => {\n      try {\n        const aiProfile = buildProfile(form);\n        // Convert 1-5 scale to 1-10 for backend compatibility\n        const backendStressLevel = (form.stressLevel * 2) as 2 | 4 | 6 | 8 | 10;\n        const response = await translateCrisis({\n          stressLevel: backendStressLevel,\n          rawMessage: form.rawMessage,\n          aiProfile\n        });\n        setResult({ data: response, error: undefined });\n      } catch (error) {\n        console.error(error);\n        setResult({\n          data: undefined,\n          error:\n            error instanceof Error\n              ? error.message\n              : 'Something went wrong while translating your message. Please try again.'\n        });\n      }\n    });\n  };\n\n  const handleReset = () => {\n    setForm(INITIAL_FORM_STATE);\n    setResult({});\n  };\n\n  // Calculate recent trend (simplified - in production, would use actual history)\n  const recentTrend: 'increasing' | 'stable' | 'decreasing' = \n    form.stressLevel >= 4 ? 'increasing' : 'stable';\n\n  return (\n    <div className=\"flex flex-col gap-8 pb-24\">\n      {/* Predictive Alert */}\n      <PredictiveAlert\n        stressLevel={form.stressLevel}\n        recentTrend={recentTrend}\n        timeOfDay={new Date().getHours()}\n        environment={form.environment}\n        onSendAlert={() => {\n          // Auto-trigger caregiver alert if user confirms\n          if (profile && result.data) {\n            // This would trigger the alert automatically\n            console.log('Predictive alert: sending to caregivers');\n          }\n        }}\n      />\n\n      {/* Header */}\n      <div className=\"flex flex-col gap-2\">\n        <Badge tone=\"sage\" className=\"self-start\">Crisis Translator</Badge>\n        <h1 className=\"text-3xl md:text-4xl font-bold text-[var(--color-ink)] dark:text-white tracking-tight\">\n          Grounded support, step by step.\n        </h1>\n        <p className=\"text-base leading-7 text-[var(--color-muted)] max-w-2xl\">\n          Input how you're feeling and we'll craft a calm, structured plan your caregiver can follow.\n        </p>\n      </div>\n\n      {/* Two-Panel Layout - Matching reference design */}\n      <div className=\"grid gap-6 lg:grid-cols-[1fr_1fr]\">\n        <SectionCard accent=\"none\" className=\"gap-6 p-6 bg-white rounded-2xl shadow-lg dark:bg-[rgba(15,23,42,0.95)] backdrop-blur-sm\">\n          <div className=\"flex flex-col gap-2\">\n            <h2 className=\"text-lg font-semibold tracking-[-0.01em] text-[var(--color-ink)] dark:text-white\">\n              Crisis Input\n            </h2>\n          </div>\n\n          <div className=\"flex flex-col gap-6\">\n            {/* Stress Gauge - Semi-circular like in the design */}\n            <div className=\"flex flex-col gap-4 items-center py-4\">\n              <span className=\"text-sm font-semibold text-[var(--color-ink)] dark:text-white\">\n                How are you feeling right now?\n              </span>\n              <StressGauge\n                value={form.stressLevel}\n                onChange={(level) => handleChange('stressLevel', level)}\n              />\n            </div>\n\n            <div className=\"flex flex-col gap-4\">\n              <ContextualEnvironment\n                value={form.environment}\n                onChange={(env) => handleChange('environment', env)}\n                showLabel={true}\n              />\n            </div>\n          </div>\n\n          <label className=\"flex flex-col gap-2\">\n            <span className=\"text-sm font-medium\">Raw message</span>\n            <div className=\"relative\">\n              <textarea\n                value={form.rawMessage}\n                onChange={(event) => handleChange('rawMessage', event.target.value)}\n                rows={6}\n                placeholder=\"Tell us what's happening...\"\n                className=\"w-full rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-white p-4 text-sm text-[var(--color-ink)] shadow-sm transition-all focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:bg-[rgba(15,23,42,0.75)] dark:text-white dark:focus:border-indigo-400\"\n              />\n              <button\n                type=\"button\"\n                className=\"absolute right-3 top-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n                aria-label=\"Expand\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n              </button>\n            </div>\n          </label>\n\n          {/* Simplified form - focus on core inputs */}\n          <div className=\"hidden\">\n            {/* Keep these fields for backend but hide from UI for cleaner design */}\n            <input\n              value={form.triggers}\n              onChange={(event) => handleChange('triggers', event.target.value)}\n              placeholder=\"Triggers\"\n            />\n            <input\n              value={form.safeSpace}\n              onChange={(event) => handleChange('safeSpace', event.target.value)}\n              placeholder=\"Safe Space\"\n            />\n            <input\n              value={form.calmingItem}\n              onChange={(event) => handleChange('calmingItem', event.target.value)}\n              placeholder=\"Calming Item\"\n            />\n            <input\n              value={form.communicationStyle}\n              onChange={(event) => handleChange('communicationStyle', event.target.value)}\n              placeholder=\"Communication Style\"\n            />\n            <textarea\n              value={form.supportContext}\n              onChange={(event) => handleChange('supportContext', event.target.value)}\n              placeholder=\"Support Context\"\n            />\n          </div>\n\n          <Button\n            type=\"button\"\n            variant=\"primary\"\n            loading={isPending}\n            disabled={isSubmitDisabled}\n            onClick={handleSubmit}\n            className=\"w-full py-3 text-base font-semibold bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg\"\n          >\n            Translate to visual plan\n          </Button>\n\n          {result.error ? (\n            <SectionCard accent=\"rose\" className=\"gap-2 border-dashed bg-[rgba(232,180,184,0.15)] text-sm text-[var(--color-rose)]\">\n              <span>{result.error}</span>\n            </SectionCard>\n          ) : null}\n\n          {/* Calming Interventions */}\n          {form.stressLevel >= 2 && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800\">\n              <CalmingInterventions\n                stressLevel={form.stressLevel}\n                onSelect={(technique) => {\n                  console.log('Selected technique:', technique.name);\n                  // Could show a modal with full steps here\n                }}\n              />\n            </div>\n          )}\n        </SectionCard>\n\n        <SectionCard accent=\"sage\" className=\"gap-6 p-6 bg-white rounded-2xl shadow-lg dark:bg-[rgba(15,23,42,0.95)] backdrop-blur-sm\">\n          <div className=\"flex flex-col gap-2 text-[var(--color-ink)] dark:text-white\">\n            <h2 className=\"text-lg font-semibold tracking-[-0.01em]\">Recommended Output</h2>\n          </div>\n\n          {result.data ? (\n            <div className=\"flex flex-col gap-6 text-[var(--color-ink)] dark:text-white\">\n              {/* Recommended Medium */}\n              {result.data.communicationMedium && (\n                <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\n                  <h3 className=\"text-xs font-semibold uppercase tracking-[0.08em] text-[rgba(17,24,39,0.55)] dark:text-[rgba(226,232,240,0.75)] mb-2\">\n                    Recommended Medium\n                  </h3>\n                  <p className=\"text-base font-medium\">{result.data.communicationMedium}</p>\n                </div>\n              )}\n\n              {/* Translated Message - Matching reference style */}\n              <div className=\"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0\">\n                    <span className=\"text-sm\">ðŸ‘¥</span>\n                  </div>\n                  <p className=\"flex-1 text-sm leading-6 whitespace-pre-wrap text-gray-800 dark:text-gray-200\">\n                    {result.data.translatedMessage}\n                  </p>\n                </div>\n              </div>\n\n              {/* Visual Plan Steps - Matching reference design */}\n              {result.data.translatedMessage && (\n                <div className=\"mt-4\">\n                  <VisualPlanSteps\n                    steps={[\n                      {\n                        stepNumber: 1,\n                        title: 'Open softly',\n                        message: result.data.translatedMessage.split('.')[0] || result.data.translatedMessage.substring(0, 100),\n                        icon: 'ðŸ›ï¸'\n                      },\n                      {\n                        stepNumber: 2,\n                        title: 'Name the need',\n                        message: result.data.groundingTechnique?.substring(0, 80) || 'Express what you need right now',\n                        icon: 'ðŸ“¦'\n                      },\n                      {\n                        stepNumber: 3,\n                        title: 'Invite support',\n                        message: result.data.followUpSuggestion?.substring(0, 80) || 'Ask for what you need',\n                        icon: 'âš™ï¸'\n                      }\n                    ]}\n                  />\n                </div>\n              )}\n\n              {result.data.groundingTechnique && (\n                <div className=\"bg-sage-50 dark:bg-sage-900/20 rounded-xl p-4 border border-sage-200 dark:border-sage-800\">\n                  <h3 className=\"text-xs font-semibold uppercase tracking-[0.08em] text-[rgba(17,24,39,0.55)] dark:text-[rgba(226,232,240,0.75)] mb-2\">\n                    Grounding Technique\n                  </h3>\n                  <p className=\"text-sm whitespace-pre-wrap\">{result.data.groundingTechnique}</p>\n                </div>\n              )}\n\n              {result.data.safetyNote && (\n                <SectionCard\n                  accent=\"rose\"\n                  className=\"gap-2 border-dashed bg-rose-50 dark:bg-rose-900/20 text-sm text-rose-800 dark:text-rose-200\"\n                >\n                  {result.data.safetyNote}\n                </SectionCard>\n              )}\n\n              {/* Action Buttons */}\n              <div className=\"flex gap-3 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  onClick={handleReset}\n                  className=\"flex-1\"\n                >\n                  Reset\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"primary\"\n                  className=\"flex-1\"\n                  onClick={() => {\n                    // Copy to clipboard functionality\n                    if (result.data?.translatedMessage) {\n                      navigator.clipboard.writeText(result.data.translatedMessage);\n                    }\n                  }}\n                >\n                  Save Visual Plan\n                </Button>\n              </div>\n\n              {/* Caregiver Alert Section */}\n              {result.data && (\n                <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800\">\n                  <CaregiverAlertButton\n                    profile={profile}\n                    stressLevel={form.stressLevel}\n                    rawMessage={form.rawMessage}\n                    translationResult={{\n                      translatedMessage: result.data.translatedMessage,\n                      communicationMedium: result.data.communicationMedium,\n                      groundingTechnique: result.data.groundingTechnique,\n                      followUpSuggestion: result.data.followUpSuggestion,\n                      safetyNote: result.data.safetyNote,\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"text-center py-12 text-[var(--color-muted)]\">\n              <div className=\"text-4xl mb-3\">ðŸ’¬</div>\n              <p className=\"text-sm\">Your translated message and visual plan will appear here</p>\n            </div>\n          )}\n        </SectionCard>\n      </div>\n    </div>\n  );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"405c71b21c57040a5d956440b4eaa85f1b19b7bfe6\":\"translateCrisis\"},\"apps/web/app/actions/translateCrisis.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var translateCrisis=/*#__PURE__*/createServerReference(\"405c71b21c57040a5d956440b4eaa85f1b19b7bfe6\",callServer,void 0,findSourceMapURL,\"translateCrisis\");","'use client';\n\nimport * as React from 'react';\nimport { cn } from '@/lib/utils/cn';\n\ntype ButtonVariant = 'primary' | 'secondary' | 'ghost' | 'subtle' | 'danger';\n\ntype ButtonSize = 'sm' | 'md' | 'lg';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  loading?: boolean;\n  icon?: React.ReactNode;\n}\n\nconst VARIANT_STYLES: Record<ButtonVariant, string> = {\n  primary:\n    'bg-[var(--color-sky)] text-[var(--color-ink)] hover:bg-[color-mix(in_oklab,var(--color-sky),#ffffff_12%)] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-sky)]',\n  secondary:\n    'bg-[var(--color-sage)] text-[var(--color-ink)] hover:bg-[color-mix(in_oklab,var(--color-sage),#ffffff_12%)] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-sage)]',\n  ghost:\n    'bg-transparent text-[var(--body-foreground)] hover:bg-[rgba(126,156,203,0.1)] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[rgba(126,156,203,0.4)]',\n  subtle:\n    'bg-white/70 text-[var(--body-foreground)] shadow-sm hover:bg-white focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-sky)]',\n  danger:\n    'bg-[var(--color-danger)] text-white hover:bg-[color-mix(in_oklab,var(--color-danger),#000000_12%)] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-danger)]'\n};\n\nconst SIZE_STYLES: Record<ButtonSize, string> = {\n  sm: 'h-9 px-4 text-sm',\n  md: 'h-11 px-5 text-base',\n  lg: 'h-12 px-6 text-base'\n};\n\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    { variant = 'primary', size = 'md', loading = false, icon, className, disabled, children, ...props },\n    ref\n  ) => {\n    const isDisabled = disabled || loading;\n\n    return (\n      <button\n        ref={ref}\n        className={cn(\n          'inline-flex items-center justify-center gap-2 rounded-[var(--radius-pill)] font-semibold transition-all duration-200 ease-out shadow-[var(--shadow-soft)] disabled:cursor-not-allowed disabled:opacity-60 focus:outline-none',\n          VARIANT_STYLES[variant],\n          SIZE_STYLES[size],\n          loading && 'relative text-transparent',\n          className\n        )}\n        disabled={isDisabled}\n        {...props}\n      >\n        {loading && (\n          <span className=\"absolute inline-flex h-full w-full items-center justify-center text-xs font-medium text-[var(--body-foreground)]\">\n            Craftingâ€¦\n          </span>\n        )}\n        {!loading && icon}\n        <span>{children}</span>\n      </button>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n","'use client';\n\nimport { motion } from 'framer-motion';\n\nexport type StressLevel = 1 | 2 | 3 | 4 | 5;\n\ninterface StressGaugeProps {\n  value: StressLevel;\n  onChange: (level: StressLevel) => void;\n}\n\nexport function StressGauge({ value, onChange }: StressGaugeProps) {\n  const percentage = (value / 5) * 100;\n  // Calculate angle for semi-circle (0 to 180 degrees)\n  const angle = (percentage / 100) * 180;\n\n  const getColor = (level: StressLevel) => {\n    if (level === 5) return '#ef4444'; // red\n    if (level === 4) return '#f97316'; // orange\n    if (level === 3) return '#f59e0b'; // amber\n    if (level === 2) return '#3b82f6'; // blue\n    return '#10b981'; // emerald\n  };\n\n  const color = getColor(value);\n\n  // Calculate end point of arc\n  const centerX = 128;\n  const centerY = 128;\n  const radius = 112;\n  const startAngle = 180; // Start from left (180 degrees)\n  const endAngle = 180 - angle; // End angle based on value\n  \n  const startX = centerX - radius;\n  const startY = centerY;\n  const endX = centerX + radius * Math.cos((endAngle * Math.PI) / 180);\n  const endY = centerY - radius * Math.sin((endAngle * Math.PI) / 180);\n  \n  const largeArcFlag = angle > 180 ? 1 : 0;\n\n  return (\n    <div className=\"flex flex-col items-center gap-4\">\n      <div className=\"relative w-64 h-32\">\n        {/* Background semi-circle track */}\n        <svg\n          width=\"256\"\n          height=\"128\"\n          viewBox=\"0 0 256 128\"\n          className=\"absolute inset-0\"\n        >\n          <path\n            d=\"M 16 112 A 112 112 0 0 1 240 112\"\n            fill=\"none\"\n            stroke=\"#e5e7eb\"\n            strokeWidth=\"16\"\n            strokeLinecap=\"round\"\n            className=\"dark:stroke-gray-700\"\n          />\n        </svg>\n\n        {/* Filled semi-circle progress */}\n        <svg\n          width=\"256\"\n          height=\"128\"\n          viewBox=\"0 0 256 128\"\n          className=\"absolute inset-0\"\n        >\n          <motion.path\n            d={`M ${startX} ${startY} A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`}\n            fill=\"none\"\n            stroke={color}\n            strokeWidth=\"16\"\n            strokeLinecap=\"round\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: percentage / 100 }}\n            transition={{ duration: 0.5, ease: 'easeOut' }}\n          />\n        </svg>\n\n        {/* Pointer indicator at end of arc */}\n        <motion.div\n          className=\"absolute\"\n          style={{\n            left: `${(endX / 256) * 100}%`,\n            top: `${(endY / 128) * 100}%`,\n            transform: 'translate(-50%, -50%)',\n            transformOrigin: 'center',\n          }}\n          animate={{\n            left: `${(endX / 256) * 100}%`,\n            top: `${(endY / 128) * 100}%`,\n          }}\n          transition={{ duration: 0.5, ease: 'easeOut' }}\n        >\n          <div\n            className=\"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[16px] border-l-transparent border-r-transparent\"\n            style={{ borderTopColor: color }}\n          />\n        </motion.div>\n\n        {/* Droplet icon at start (left side) */}\n        <div className=\"absolute left-0 bottom-0 -translate-x-1/2\">\n          <div\n            className=\"w-5 h-5 rounded-full flex items-center justify-center text-xs\"\n            style={{ backgroundColor: color }}\n          >\n            <span className=\"text-[10px]\">ðŸ’§</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Level display */}\n      <div className=\"flex items-center gap-2\">\n        <span className=\"text-sm font-medium text-[var(--color-ink)] dark:text-white\">\n          Stress\n        </span>\n        <span\n          className=\"text-2xl font-bold\"\n          style={{ color }}\n        >\n          {value}/5\n        </span>\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\nimport { motion } from 'framer-motion';\n\ninterface PlanStep {\n  stepNumber: number;\n  title: string;\n  message: string;\n  tip?: string;\n  icon?: string;\n}\n\ninterface VisualPlanStepsProps {\n  steps: PlanStep[];\n  currentStep?: number;\n}\n\nexport function VisualPlanSteps({ steps, currentStep }: VisualPlanStepsProps) {\n  return (\n    <div className=\"flex flex-col gap-4\">\n      {steps.map((step, index) => {\n        const isActive = currentStep === undefined || currentStep === step.stepNumber;\n        const isPast = currentStep !== undefined && currentStep > step.stepNumber;\n\n        return (\n            <motion.div\n              key={step.stepNumber}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: isActive || isPast ? 1 : 0.5, x: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className={`\n                flex items-start gap-3 p-3 rounded-lg\n                ${isActive\n                  ? 'bg-indigo-50 dark:bg-indigo-900/20'\n                  : isPast\n                  ? 'bg-gray-50 dark:bg-gray-800/50'\n                  : 'bg-white/50 dark:bg-gray-800/30'\n                }\n              `}\n            >\n              {/* Icon - Square like in reference */}\n              <div\n                className={`\n                  w-10 h-10 rounded flex items-center justify-center\n                  flex-shrink-0\n                  ${isActive\n                    ? 'bg-indigo-600 text-white'\n                    : isPast\n                    ? 'bg-gray-400 text-white'\n                    : 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400'\n                  }\n                `}\n              >\n                {step.icon ? (\n                  <span className=\"text-base\">{step.icon}</span>\n                ) : (\n                  <span className=\"text-sm font-bold\">{step.stepNumber}</span>\n                )}\n              </div>\n\n              {/* Content */}\n              <div className=\"flex-1\">\n                <h3\n                  className={`\n                  text-sm font-semibold mb-1\n                  ${isActive\n                    ? 'text-indigo-900 dark:text-indigo-100'\n                    : 'text-gray-600 dark:text-gray-400'\n                  }\n                `}\n                >\n                  Step {step.stepNumber} {step.title}\n                </h3>\n                <p\n                  className={`\n                  text-xs leading-relaxed\n                  ${isActive\n                    ? 'text-gray-800 dark:text-gray-200'\n                    : 'text-gray-600 dark:text-gray-400'\n                  }\n                `}\n                >\n                  {step.message}\n                </p>\n              </div>\n\n            {/* Checkmark for completed steps */}\n            {isPast && (\n              <motion.div\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                className=\"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center flex-shrink-0\"\n              >\n                âœ“\n              </motion.div>\n            )}\n          </motion.div>\n        );\n      })}\n\n      {/* Pagination dots */}\n      <div className=\"flex items-center justify-center gap-2 pt-2\">\n        {steps.map((_, index) => (\n          <div\n            key={index}\n            className={`\n              w-2 h-2 rounded-full transition-all duration-200\n              ${currentStep === undefined || currentStep === index + 1\n                ? 'bg-indigo-500 w-8'\n                : currentStep !== undefined && currentStep > index + 1\n                ? 'bg-green-500'\n                : 'bg-gray-300 dark:bg-gray-600'\n              }\n            `}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\n\nexport type Environment = 'home' | 'school' | 'work' | 'social' | 'public' | 'unknown';\n\ninterface EnvironmentConfig {\n  id: Environment;\n  label: string;\n  emoji: string;\n  icon: string;\n  description: string;\n  color: string;\n}\n\nconst ENVIRONMENTS: EnvironmentConfig[] = [\n  {\n    id: 'home',\n    label: 'Home',\n    emoji: 'ðŸ ',\n    icon: 'ðŸ ',\n    description: 'Safe, familiar space',\n    color: 'from-blue-400 to-blue-600'\n  },\n  {\n    id: 'school',\n    label: 'School',\n    emoji: 'ðŸ«',\n    icon: 'ðŸ«',\n    description: 'Academic environment',\n    color: 'from-purple-400 to-purple-600'\n  },\n  {\n    id: 'work',\n    label: 'Work',\n    emoji: 'ðŸ’¼',\n    icon: 'ðŸ’¼',\n    description: 'Professional setting',\n    color: 'from-indigo-400 to-indigo-600'\n  },\n  {\n    id: 'social',\n    label: 'Social',\n    emoji: 'ðŸ‘¥',\n    icon: 'ðŸ‘¥',\n    description: 'With friends or family',\n    color: 'from-pink-400 to-pink-600'\n  },\n  {\n    id: 'public',\n    label: 'Public',\n    emoji: 'ðŸŒ†',\n    icon: 'ðŸŒ†',\n    description: 'Public space',\n    color: 'from-gray-400 to-gray-600'\n  },\n  {\n    id: 'unknown',\n    label: 'Other',\n    emoji: 'ðŸ“',\n    icon: 'ðŸ“',\n    description: 'Different location',\n    color: 'from-slate-400 to-slate-600'\n  }\n];\n\ninterface ContextualEnvironmentProps {\n  value?: Environment;\n  onChange?: (env: Environment) => void;\n  showLabel?: boolean;\n}\n\nexport function ContextualEnvironment({\n  value,\n  onChange,\n  showLabel = true\n}: ContextualEnvironmentProps) {\n  const [selectedEnv, setSelectedEnv] = useState<Environment>(value || 'unknown');\n  const [autoDetected, setAutoDetected] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (value) {\n      setSelectedEnv(value);\n    } else {\n      // Auto-detect environment based on time and day (simple heuristic)\n      const hour = new Date().getHours();\n      const day = new Date().getDay();\n      \n      if (hour >= 8 && hour <= 15 && day >= 1 && day <= 5) {\n        setSelectedEnv('school');\n        setAutoDetected(true);\n      } else if (hour >= 9 && hour <= 17 && day >= 1 && day <= 5) {\n        setSelectedEnv('work');\n        setAutoDetected(true);\n      } else {\n        setSelectedEnv('home');\n        setAutoDetected(true);\n      }\n    }\n  }, [value]);\n\n  const handleSelect = (env: Environment) => {\n    setSelectedEnv(env);\n    setAutoDetected(false);\n    onChange?.(env);\n  };\n\n  const currentEnv = ENVIRONMENTS.find((e) => e.id === selectedEnv) || ENVIRONMENTS[5];\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      {showLabel && (\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm font-semibold text-[var(--color-ink)] dark:text-white\">\n            Where are you right now?\n          </span>\n          {autoDetected && (\n            <span className=\"text-xs text-[var(--color-muted)]\">Auto-detected</span>\n          )}\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-3 gap-3\">\n        {ENVIRONMENTS.map((env) => {\n          const isSelected = selectedEnv === env.id;\n\n          return (\n            <motion.button\n              key={env.id}\n              type=\"button\"\n              onClick={() => handleSelect(env.id)}\n              className={`\n                flex flex-col items-center gap-2 p-3 rounded-xl\n                transition-all duration-200\n                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\n                ${isSelected\n                  ? `bg-gradient-to-br ${env.color} text-white shadow-lg`\n                  : 'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300'\n                }\n              `}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              transition={{ type: 'spring', stiffness: 400, damping: 17 }}\n            >\n              <span className=\"text-2xl\">{env.icon}</span>\n              <span className={`text-xs font-medium ${isSelected ? 'text-white' : ''}`}>\n                {env.label}\n              </span>\n            </motion.button>\n          );\n        })}\n      </div>\n\n      {selectedEnv && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className={`\n            rounded-lg p-3 text-sm\n            bg-gradient-to-r ${currentEnv.color}\n            text-white\n          `}\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-lg\">{currentEnv.icon}</span>\n            <span className=\"font-medium\">{currentEnv.description}</span>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n\n","\"use client\";\nimport { jsx, Fragment } from 'react/jsx-runtime';\nimport { useMemo, useRef, useState, useContext } from 'react';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { usePresence } from './use-presence.mjs';\nimport { onlyElements, getChildKey } from './utils.mjs';\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, presenceAffectsLayout = true, mode = \"sync\", propagate = false, anchorX = \"left\", root }) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate);\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children]);\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys = propagate && !isParentPresent ? [] : presentChildren.map(getChildKey);\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true);\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren);\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map());\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren);\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        pendingPresentChildren.current = presentChildren;\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i]);\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false);\n                }\n            }\n            else {\n                exitComplete.delete(key);\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")]);\n    const exitingChildren = [];\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren];\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i];\n            const key = getChildKey(child);\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child);\n                exitingChildren.push(child);\n            }\n        }\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren;\n        }\n        setRenderedChildren(onlyElements(nextChildren));\n        setDiffedChildren(presentChildren);\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null;\n    }\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext);\n    return (jsx(Fragment, { children: renderedChildren.map((child) => {\n            const key = getChildKey(child);\n            const isPresent = propagate && !isParentPresent\n                ? false\n                : presentChildren === renderedChildren ||\n                    presentKeys.includes(key);\n            const onExit = () => {\n                if (exitComplete.has(key)) {\n                    exitComplete.set(key, true);\n                }\n                else {\n                    return;\n                }\n                let isEveryExitComplete = true;\n                exitComplete.forEach((isExitComplete) => {\n                    if (!isExitComplete)\n                        isEveryExitComplete = false;\n                });\n                if (isEveryExitComplete) {\n                    forceRender?.();\n                    setRenderedChildren(pendingPresentChildren.current);\n                    propagate && safeToRemove?.();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            return (jsx(PresenceChild, { isPresent: isPresent, initial: !isInitialRender.current || initial\n                    ? undefined\n                    : false, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode, root: root, onExitComplete: isPresent ? undefined : onExit, anchorX: anchorX, children: child }, key));\n        }) }));\n};\n\nexport { AnimatePresence };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, anchorX, root }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    let isReusedContext = true;\n    let context = useMemo(() => {\n        isReusedContext = false;\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId) => {\n                presenceChildren.set(childId, true);\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete)\n                        return; // can stop searching when any is incomplete\n                }\n                onExitComplete && onExitComplete();\n            },\n            register: (childId) => {\n                presenceChildren.set(childId, false);\n                return () => presenceChildren.delete(childId);\n            },\n        };\n    }, [isPresent, presenceChildren, onExitComplete]);\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context };\n    }\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = (jsx(PopChild, { isPresent: isPresent, anchorX: anchorX, root: root, children: children }));\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport { isHTMLElement } from 'motion-dom';\nimport * as React from 'react';\nimport { useId, useRef, useContext, useInsertionEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\nimport { useComposedRefs } from '../../utils/use-composed-ref.mjs';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const parent = element.offsetParent;\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0;\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n            size.right = parentWidth - size.width - size.left;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent, anchorX, root }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n    });\n    const { nonce } = useContext(MotionConfigContext);\n    const composedRef = useComposedRefs(ref, children?.ref);\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        if (nonce)\n            style.nonce = nonce;\n        const parent = root ?? document.head;\n        parent.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `);\n        }\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style);\n            }\n        };\n    }, [isPresent]);\n    return (jsx(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size, children: React.cloneElement(children, { ref: composedRef }) }));\n}\n\nexport { PopChild };\n","import * as React from 'react';\n\n/**\n * Taken from https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/compose-refs.tsx\n */\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        return ref(value);\n    }\n    else if (ref !== null && ref !== undefined) {\n        ref.current = value;\n    }\n}\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nfunction composeRefs(...refs) {\n    return (node) => {\n        let hasCleanup = false;\n        const cleanups = refs.map((ref) => {\n            const cleanup = setRef(ref, node);\n            if (!hasCleanup && typeof cleanup === \"function\") {\n                hasCleanup = true;\n            }\n            return cleanup;\n        });\n        // React <19 will log an error to the console if a callback ref returns a\n        // value. We don't use ref cleanups internally so this will only happen if a\n        // user's ref callback returns a value, which we only expect if they are\n        // using the cleanup functionality added in React 19.\n        if (hasCleanup) {\n            return () => {\n                for (let i = 0; i < cleanups.length; i++) {\n                    const cleanup = cleanups[i];\n                    if (typeof cleanup === \"function\") {\n                        cleanup();\n                    }\n                    else {\n                        setRef(refs[i], null);\n                    }\n                }\n            };\n        }\n    };\n}\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nfunction useComposedRefs(...refs) {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return React.useCallback(composeRefs(...refs), refs);\n}\n\nexport { useComposedRefs };\n","import { Children, isValidElement } from 'react';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n\nexport { getChildKey, onlyElements };\n","'use client';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport type { StressLevel } from '@/components/VisualStressLanguage';\n\ninterface CalmingTechnique {\n  id: string;\n  name: string;\n  description: string;\n  steps: string[];\n  duration: string;\n  icon: string;\n  color: string;\n  stressLevels: StressLevel[];\n}\n\nconst CALMING_TECHNIQUES: CalmingTechnique[] = [\n  {\n    id: 'box-breathing',\n    name: 'Box Breathing',\n    description: '4-4-4-4 breathing pattern to regulate your nervous system',\n    steps: [\n      'Inhale through your nose for 4 counts',\n      'Hold your breath for 4 counts',\n      'Exhale through your mouth for 4 counts',\n      'Hold for 4 counts',\n      'Repeat 4-6 times'\n    ],\n    duration: '2-3 minutes',\n    icon: 'ðŸ«',\n    color: 'from-blue-400 to-blue-600',\n    stressLevels: [3, 4, 5]\n  },\n  {\n    id: '54321-grounding',\n    name: '5-4-3-2-1 Grounding',\n    description: 'Use your senses to anchor yourself in the present moment',\n    steps: [\n      'Name 5 things you can SEE',\n      'Name 4 things you can TOUCH',\n      'Name 3 things you can HEAR',\n      'Name 2 things you can SMELL',\n      'Name 1 thing you can TASTE'\n    ],\n    duration: '2-3 minutes',\n    icon: 'ðŸŒ¿',\n    color: 'from-emerald-400 to-emerald-600',\n    stressLevels: [2, 3, 4]\n  },\n  {\n    id: 'tipp-temperature',\n    name: 'Temperature Change (TIPP)',\n    description: 'Use temperature to quickly shift your body state',\n    steps: [\n      'Splash cold water on your face',\n      'Or hold an ice cube in your hands',\n      'Or place a cold compress on your neck',\n      'Focus on the sensation for 30 seconds',\n      'Take 3 deep breaths'\n    ],\n    duration: '1-2 minutes',\n    icon: 'â„ï¸',\n    color: 'from-cyan-400 to-cyan-600',\n    stressLevels: [4, 5]\n  },\n  {\n    id: 'progressive-muscle',\n    name: 'Progressive Muscle Relaxation',\n    description: 'Systematically tense and release muscle groups',\n    steps: [\n      'Start with your toes - tense for 5 seconds, then release',\n      'Move to your calves - tense and release',\n      'Continue up your body: thighs, stomach, hands, arms, shoulders',\n      'Finish with your face - scrunch and release',\n      'Take 3 deep breaths'\n    ],\n    duration: '5-10 minutes',\n    icon: 'ðŸ§˜',\n    color: 'from-purple-400 to-purple-600',\n    stressLevels: [2, 3, 4]\n  },\n  {\n    id: 'mindful-movement',\n    name: 'Gentle Movement',\n    description: 'Use movement to release tension and regulate',\n    steps: [\n      'Stand or sit comfortably',\n      'Slowly roll your shoulders back 5 times',\n      'Gently turn your head side to side',\n      'Stretch your arms overhead and hold for 10 seconds',\n      'Take 3 deep breaths'\n    ],\n    duration: '2-3 minutes',\n    icon: 'ðŸ¤¸',\n    color: 'from-pink-400 to-pink-600',\n    stressLevels: [1, 2, 3]\n  }\n];\n\ninterface CalmingInterventionsProps {\n  stressLevel: StressLevel;\n  onSelect?: (technique: CalmingTechnique) => void;\n}\n\nexport function CalmingInterventions({\n  stressLevel,\n  onSelect\n}: CalmingInterventionsProps) {\n  const relevantTechniques = CALMING_TECHNIQUES.filter((t) =>\n    t.stressLevels.includes(stressLevel)\n  );\n\n  if (relevantTechniques.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <div>\n        <h3 className=\"text-sm font-semibold text-[var(--color-ink)] dark:text-white mb-1\">\n          Suggested Calming Techniques\n        </h3>\n        <p className=\"text-xs text-[var(--color-muted)]\">\n          Evidence-based interventions for your current stress level\n        </p>\n      </div>\n\n      <div className=\"flex flex-col gap-3\">\n        <AnimatePresence mode=\"wait\">\n          {relevantTechniques.map((technique, index) => (\n            <motion.div\n              key={technique.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              transition={{ delay: index * 0.1 }}\n              className={`\n                rounded-xl p-4 cursor-pointer\n                bg-gradient-to-br ${technique.color}\n                text-white\n                shadow-lg hover:shadow-xl\n                transition-all duration-200\n              `}\n              onClick={() => onSelect?.(technique)}\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-2xl\">{technique.icon}</span>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <h4 className=\"font-semibold text-sm\">{technique.name}</h4>\n                    <span className=\"text-xs opacity-75\">{technique.duration}</span>\n                  </div>\n                  <p className=\"text-xs opacity-90 mb-2\">{technique.description}</p>\n                  <ul className=\"text-xs opacity-80 space-y-1\">\n                    {technique.steps.slice(0, 3).map((step, i) => (\n                      <li key={i} className=\"flex items-start gap-2\">\n                        <span className=\"opacity-60\">â€¢</span>\n                        <span>{step}</span>\n                      </li>\n                    ))}\n                    {technique.steps.length > 3 && (\n                      <li className=\"text-xs opacity-60 italic\">\n                        + {technique.steps.length - 3} more steps\n                      </li>\n                    )}\n                  </ul>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { SectionCard } from '@/components/ui/SectionCard';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\n\ninterface PredictiveAlertProps {\n  stressLevel: number;\n  recentTrend: 'increasing' | 'stable' | 'decreasing';\n  timeOfDay: number;\n  environment: string;\n  onDismiss?: () => void;\n  onSendAlert?: () => void;\n}\n\nexport function PredictiveAlert({\n  stressLevel,\n  recentTrend,\n  timeOfDay,\n  environment,\n  onDismiss,\n  onSendAlert\n}: PredictiveAlertProps) {\n  const [show, setShow] = useState(false);\n\n  useEffect(() => {\n    // Show predictive alert if:\n    // - Stress level is 3+ AND trending up\n    // - Stress level is 4+\n    // - Multiple high-stress events in short time\n    const shouldShow = \n      (stressLevel >= 4) ||\n      (stressLevel >= 3 && recentTrend === 'increasing');\n\n    setShow(shouldShow);\n  }, [stressLevel, recentTrend]);\n\n  if (!show) return null;\n\n  const riskLevel = stressLevel >= 5 ? 'high' : stressLevel >= 4 ? 'moderate' : 'low';\n  const urgency = stressLevel >= 5 ? 'immediate' : stressLevel >= 4 ? 'soon' : 'monitor';\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        className=\"fixed top-4 right-4 left-4 md:left-auto md:w-96 z-50\"\n      >\n        <SectionCard\n          accent={riskLevel === 'high' ? 'rose' : 'amber'}\n          className=\"p-4 shadow-2xl border-2\"\n        >\n          <div className=\"flex items-start gap-3\">\n            <div className=\"text-3xl\">\n              {riskLevel === 'high' ? 'ðŸš¨' : 'âš ï¸'}\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"font-semibold text-sm text-[var(--color-ink)] dark:text-white\">\n                  Predictive Alert\n                </h3>\n                {onDismiss && (\n                  <button\n                    onClick={() => {\n                      setShow(false);\n                      onDismiss?.();\n                    }}\n                    className=\"text-[var(--color-muted)] hover:text-[var(--color-ink)] dark:hover:text-white\"\n                  >\n                    âœ•\n                  </button>\n                )}\n              </div>\n              <p className=\"text-xs text-[var(--color-muted)] mb-3\">\n                Stress escalation detected. Consider proactive intervention.\n              </p>\n              \n              <div className=\"space-y-2 mb-3\">\n                <div className=\"flex items-center gap-2 text-xs\">\n                  <span className=\"font-medium text-[var(--color-ink)] dark:text-white\">\n                    Current Level:\n                  </span>\n                  <Badge className={riskLevel === 'high' ? 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200' : 'bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-200'}>\n                    {stressLevel}/5\n                  </Badge>\n                </div>\n                <div className=\"flex items-center gap-2 text-xs\">\n                  <span className=\"font-medium text-[var(--color-ink)] dark:text-white\">\n                    Trend:\n                  </span>\n                  <span className=\"text-[var(--color-muted)] capitalize\">{recentTrend}</span>\n                </div>\n                <div className=\"flex items-center gap-2 text-xs\">\n                  <span className=\"font-medium text-[var(--color-ink)] dark:text-white\">\n                    Environment:\n                  </span>\n                  <span className=\"text-[var(--color-muted)] capitalize\">{environment}</span>\n                </div>\n              </div>\n\n              <div className=\"flex gap-2\">\n                {onSendAlert && (\n                  <Button\n                    variant=\"primary\"\n                    size=\"sm\"\n                    onClick={() => {\n                      onSendAlert();\n                      setShow(false);\n                    }}\n                  >\n                    Send Alert to Caregiver\n                  </Button>\n                )}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setShow(false)}\n                >\n                  Dismiss\n                </Button>\n              </div>\n            </div>\n          </div>\n        </SectionCard>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\n","/* __next_internal_action_entry_do_not_use__ [{\"4076abaad3a3aa2f1401a13f4b97972f263cb9ee18\":\"sendCaregiverAlert\"},\"apps/web/app/actions/sendCaregiverAlert.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var sendCaregiverAlert=/*#__PURE__*/createServerReference(\"4076abaad3a3aa2f1401a13f4b97972f263cb9ee18\",callServer,void 0,findSourceMapURL,\"sendCaregiverAlert\");","'use client';\n\nimport { useState, useTransition } from 'react';\nimport { Button } from '@/components/ui/Button';\nimport { sendCaregiverAlert, type SendAlertInput } from '@/app/actions/sendCaregiverAlert';\nimport type { ProfileResponseDTO } from '@common/types';\n\ninterface CaregiverAlertButtonProps {\n  profile: ProfileResponseDTO | null;\n  stressLevel: number;\n  rawMessage: string;\n  translationResult?: {\n    translatedMessage?: string;\n    communicationMedium?: string;\n    groundingTechnique?: string;\n    followUpSuggestion?: string;\n    safetyNote?: string;\n  };\n}\n\nexport function CaregiverAlertButton({\n  profile,\n  stressLevel,\n  rawMessage,\n  translationResult\n}: CaregiverAlertButtonProps) {\n  const [isPending, startTransition] = useTransition();\n  const [alertStatus, setAlertStatus] = useState<{\n    type: 'success' | 'error' | null;\n    message: string;\n  }>({ type: null, message: '' });\n\n  const handleSendAlert = (contactPhone: string, contactName: string) => {\n    if (!contactPhone) {\n      setAlertStatus({\n        type: 'error',\n        message: 'No phone number provided for this contact'\n      });\n      return;\n    }\n\n    startTransition(async () => {\n      const alertData: SendAlertInput = {\n        to: contactPhone,\n        message: rawMessage,\n        userName: profile?.preferredName || 'User',\n        stressLevel: stressLevel,\n        translatedMessage: translationResult?.translatedMessage,\n        groundingTechnique: translationResult?.groundingTechnique,\n        actionNeeded: stressLevel >= 4 \n          ? 'High stress level detected. Immediate support recommended.'\n          : stressLevel >= 3\n          ? 'Moderate stress level. Check-in recommended.'\n          : undefined,\n      };\n\n      const result = await sendCaregiverAlert(alertData);\n\n      if (result.success) {\n        setAlertStatus({\n          type: 'success',\n          message: `Alert sent to ${contactName}!`\n        });\n        // Clear success message after 3 seconds\n        setTimeout(() => {\n          setAlertStatus({ type: null, message: '' });\n        }, 3000);\n      } else {\n        setAlertStatus({\n          type: 'error',\n          message: result.error || 'Failed to send alert'\n        });\n      }\n    });\n  };\n\n  // Get SMS contacts with phone numbers\n  const smsContacts = profile?.supportCircle?.filter(\n    (contact) => contact.contactMethod === 'sms' && contact.phoneNumber\n  ) || [];\n\n  if (smsContacts.length === 0) {\n    return (\n      <div className=\"rounded-lg border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800 dark:border-amber-800 dark:bg-amber-900/20 dark:text-amber-200\">\n        <p className=\"font-medium\">No SMS contacts configured</p>\n        <p className=\"mt-1 text-xs opacity-75\">\n          Add phone numbers to your support circle in your profile to enable caregiver alerts.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-sm font-semibold text-[var(--color-ink)] dark:text-white\">\n            Send Alert to Caregiver\n          </h3>\n          <p className=\"text-xs text-[var(--color-muted)] mt-1\">\n            Notify your support circle about this situation\n          </p>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        {smsContacts.map((contact) => (\n          <div\n            key={`${contact.name}-${contact.relationship}`}\n            className=\"flex items-center justify-between rounded-lg border bg-white/90 p-3 dark:bg-[rgba(15,23,42,0.75)]\"\n          >\n            <div>\n              <p className=\"text-sm font-medium text-[var(--color-ink)] dark:text-white\">\n                {contact.name}\n              </p>\n              <p className=\"text-xs text-[var(--color-muted)]\">\n                {contact.relationship}\n              </p>\n            </div>\n            <Button\n              type=\"button\"\n              variant=\"primary\"\n              size=\"sm\"\n              loading={isPending}\n              onClick={() => handleSendAlert(contact.phoneNumber!, contact.name)}\n              disabled={isPending || !contact.phoneNumber}\n            >\n              Send Alert\n            </Button>\n          </div>\n        ))}\n      </div>\n\n      {alertStatus.type && (\n        <div\n          className={`rounded-lg p-3 text-sm ${\n            alertStatus.type === 'success'\n              ? 'bg-emerald-50 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-200'\n              : 'bg-rose-50 text-rose-800 dark:bg-rose-900/20 dark:text-rose-200'\n          }`}\n        >\n          {alertStatus.message}\n        </div>\n      )}\n    </div>\n  );\n}\n\n","import type { ProfileResponseDTO } from '@common/types';\n\nconst DEFAULT_BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:4000';\n\nexport class ApiError extends Error {\n  constructor(message: string, public readonly status?: number) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nasync function fetchApi<T>(\n  endpoint: string,\n  options?: RequestInit\n): Promise<T> {\n  const response = await fetch(`${DEFAULT_BACKEND_URL}${endpoint}`, {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options?.headers,\n    },\n  });\n\n  if (!response.ok) {\n    let message = `API request failed: ${response.statusText}`;\n    try {\n      const errorBody = await response.json();\n      if (typeof errorBody?.message === 'string') {\n        message = errorBody.message;\n      }\n    } catch {\n      // Ignore JSON parse errors\n    }\n    throw new ApiError(message, response.status);\n  }\n\n  return response.json();\n}\n\nexport async function getProfileByUserId(userId: string): Promise<ProfileResponseDTO> {\n  return fetchApi<ProfileResponseDTO>(`/api/profiles/${userId}`);\n}\n\nexport async function profileExists(userId: string): Promise<boolean> {\n  try {\n    const response = await fetch(`${DEFAULT_BACKEND_URL}/api/profiles/${userId}/exists`);\n    if (!response.ok) {\n      return false;\n    }\n    const data = await response.json();\n    return data.exists === true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function createProfile(payload: {\n  userId: string;\n  preferredName: string;\n  supportCircle?: Array<{\n    name: string;\n    relationship: string;\n    contactMethod: 'sms' | 'email' | 'call';\n    phoneNumber?: string;\n    email?: string;\n  }>;\n  communicationGuidelines?: {\n    tone: 'soft' | 'direct' | 'informative';\n    doPhrases?: string[];\n    avoidPhrases?: string[];\n  };\n  crisisSignals?: {\n    triggers?: string[];\n    escalationIndicators?: string[];\n    selfRegulationTechniques?: string[];\n  };\n}) {\n  return fetchApi('/api/profiles', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  });\n}\n\n"],"names":["ACTION_HMR_REFRESH","ACTION_NAVIGATE","ACTION_REFRESH","ACTION_RESTORE","ACTION_SERVER_ACTION","ACTION_SERVER_PATCH","PrefetchKind","isThenable","promise","then","dispatchAppRouterAction","useActionQueue","dispatch","action","Error","__DEV__","process","env","NODE_ENV","promisesWithDebugInfo","WeakMap","actionQueue","state","setState","React","useState","useAppDevRenderingIndicator","require","appDevRenderingIndicator","stateWithDebugInfo","useMemo","promiseWithDebugInfo","get","undefined","debugInfo","Promise","resolve","asyncState","push","_debugInfo","set","use","callServer","actionId","actionArgs","reject","startTransition","type","findSourceMapURL","basePath","__NEXT_ROUTER_BASEPATH","pathname","filename","startsWith","document","location","origin","includes","url","URL","searchParams","href","createServerReference"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,13,14,15,16,17]}